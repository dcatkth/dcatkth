<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>February 06, 2017 to February 10, 2017</title>
  <meta name="description" content="Accomplished Tasks  Installed and configured Spark on the new servers  Moved new servers to the server room  Decided on a new topology for mptcp machines  Co...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/notebook/weekly/020617">
  <link rel="alternate" type="application/rss+xml" title="DC@KTH" href="http://localhost:4000/feed.xml" />
  <link rel='stylesheet' id='open-sans-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&#038;subset=latin%2Clatin-ext&#038;ver=4.2.4' type='text/css' media='all' />
  <link href='http://fonts.googleapis.com/css?family=Titillium+Web:600italic,600,400,400italic' rel='stylesheet' type='text/css'>

  <link rel="icon" href="/images/favicon.png" type="image/x-icon">




  

  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">DC@KTH</a>


    <nav class="site-nav">

      <a href="#" class="menu-icon menu.open">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>  

    <div class="trigger"><h1>Main Navigation</h1>

 <ul class="menu">

    
    
     <li><a href="/" class="page-link">Home</a>
    
    </li>
    
    
     <li><a href="/team/" class="page-link">Team</a>
    
    </li>
    
    
     <li><a href="/systems/" class="page-link">Systems</a>
    
    </li>
    
    
     <li><a href="/projects/" class="page-link">Projects</a>
    
    </li>
    
    
     <li><a href="/publication/" class="page-link">Publications</a>
    
    </li>
    
    
     <li><a href="/theses/" class="page-link">Theses</a>
    
    </li>
    
    
     <li><a href="/courses/" class="page-link">Courses</a>
    
    </li>
    
    
     <li><a href="/vacancies/" class="page-link">Vacancies</a>
    
    </li>
    
    
     <li><a href="/news/" class="page-link">News</a>
    
    </li>
    
    
     <li><a href="https://www.instagram.com/dcatkth/" class="page-link"><span class="icon"><svg viewBox="0 0 24 24"> <path <path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z" /> </svg></span></a>
    
    </li>
    
    
     <li><a href="https://twitter.com/dcatkth" class="page-link"><span class="icon"><svg viewBox="0 0 16 16"> <path d="M16,3.536c-0.589,0.261-1.221,0.438-1.885,0.517c0.678-0.406,1.198-1.05,1.443-1.816c-0.634,0.376-1.337,0.649-2.085,0.797 c-0.599-0.638-1.452-1.037-2.396-1.037c-1.813,0-3.283,1.47-3.283,3.282c0,0.257,0.029,0.508,0.085,0.748 c-2.728-0.137-5.147-1.444-6.766-3.43c-0.283,0.485-0.444,1.049-0.444,1.65c0,1.139,0.579,2.144,1.46,2.732 C1.592,6.963,1.086,6.816,0.643,6.57c0,0.014,0,0.027,0,0.041c0,1.59,1.132,2.917,2.633,3.219C3,9.905,2.71,9.945,2.411,9.945 c-0.212,0-0.417-0.021-0.618-0.059c0.418,1.304,1.63,2.253,3.066,2.28c-1.123,0.88-2.539,1.405-4.077,1.405 c-0.265,0-0.526-0.016-0.783-0.046C1.453,14.456,3.178,15,5.032,15c6.038,0,9.34-5.002,9.34-9.34c0-0.142-0.003-0.284-0.01-0.425 C15.003,4.773,15.56,4.195,16,3.536z"></path> </svg></span></a>
    
    </li>
    
    </ul>


<!-- <ul class="menu">
        <li> <a class="page-link" href="/about">About</a></li>
        <li> <a class="page-link"  href="/blog">Blog</a>
        <li> <a class="page-link" href="/blog">CV</a>
        <li> <a class="page-link" href="/blog">For Students</a></li>
        <li> <a class="page-link"  href="/blog">Research</a></a>
        <li> <a class="page-link" href="/blog">Teaching</a>
<ul class="sub-menu">
	<li><a href="http://svmiller.com/teaching/posc-1020-introduction-to-international-relations/">POSC 1020 – Introduction to International Relations</a></li>
	<li><a href="http://svmiller.com/teaching/posc-3410-quantitative-methods-in-political-science/">POSC 3410 – Quantitative Methods in Political Science</a></li>
	<li><a href="http://svmiller.com/teaching/posc-3610-international-politics-in-crisis/">POSC 3610 – International Politics in Crisis</a></li>
	<li><a href="http://svmiller.com/teaching/posc-3630-united-states-foreign-policy/">POSC 3630 – United States Foreign Policy</a></li>
</ul></li>
        <li> <a class="page-link" href="/blog">Miscellany</a>
<ul class="sub-menu">
	<li><a href="http://svmiller.com/teaching/posc-1020-introduction-to-international-relations/">Clean USAID Greenbook Data</a></li>
	<li><a href="http://svmiller.com/teaching/posc-3410-quantitative-methods-in-political-science/">Journal of Peace Research *.bst File</a></li>
	<li><a href="http://svmiller.com/teaching/posc-3610-international-politics-in-crisis/">My Custom Beamer Style</a></li>
</ul> 

</li>
</ul> -->

     </div>  
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">February 06, 2017 to February 10, 2017</h1>
    <p class="post-meta">Posted on February 6, 2017 by   

</p>
  </header>

  <article class="post-content">
    <h1 id="accomplished-tasks">Accomplished Tasks</h1>
<ul>
  <li>Installed and configured Spark on the new servers</li>
  <li>Moved new servers to the server room</li>
  <li>Decided on a new topology for mptcp machines</li>
  <li>Compiled notes on modeling</li>
  <li>Started working through the modeling book</li>
  <li>Found additional resources for studying performance modeling</li>
</ul>

<h1 id="weekly-summary">Weekly Summary</h1>

<h1 id="snow-day">Snow Day!</h1>
<p>We had a snow day this week where we received over 12inches of snow. The university was closed which means I was stuck at home with all of my distractions. Little work got done that day. Although 
relaxing can be seen as necessary for working hard.</p>

<h2 id="modeling-work">Modeling Work</h2>
<p>I finally started making my way through the modeling book. I am currently making my way through the probability review
which is slow but will be useful. Parallel to this I spent some time compiling all of my notes 
from our collaborator on possible modeling solutions. I don’t fully understand them all but I eventually will!
As I made my way through these notes, I paused and found some tutorials on the concepts so I can eventually figure everything out.</p>

<h2 id="new-servers">New servers</h2>
<p>We moved the new servers to the server room after spending several months in the lab. It ending up being Ironic because the day after we lost our heat in the lab and we could have used the warmth from the servers!</p>

<h2 id="topology">Topology</h2>
<p>I spent some time this week on designing a topology for our MPTCP experiments. I used a modifed FAT Tree since it seems to be the recommended topology and several of its properties our good for MPTCP. A brief drawing of the topology is below:</p>

<dl class="wp-caption aligncenter" style="max-width: 300px">

<dt><a href=""><img class="" src="/images/obelix_topology.png" alt="" /></a></dt>

<dd></dd>
</dl>

<h2 id="spark">Spark</h2>
<p>I configured our new servers to run Hadoop’s HDFS and spark. It was a fairly easy process as I had configured a nice script to do most of the heavy listing. A generalized install process is found below:</p>

<ol>
  <li>Modify <strong>/etc/hosts</strong> to remove the hostname from the 127.0.0.1 line
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 127.0.0.1 localhost HOSTNAME
</code></pre></div>    </div>
  </li>
  <li>Clone git repo</li>
  <li>Install pre-requisites
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> sudo apt update &amp; sudo apt install -y openssh-server openjdk-8-jdk wget sshpass 
</code></pre></div>    </div>
  </li>
  <li>Fetch install files
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> wget http://URL-TO-APPS/hadoop-2.7.2.tar.gz
 wget http://URL-TO-APPS/spark-1.6.2-bin-hadoop2.6.tgz
</code></pre></div>    </div>
  </li>
  <li>Untar install files
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> tar xzf hadoop-2.7.2.tar.gz
 tar xzf spark-1.6.2-bin-hadoop2.6.tgz
</code></pre></div>    </div>
  </li>
  <li>Move files to correct locations
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> mv hadoop-2.7.2 /usr/local/hadoop
 mv spark-1.6.2-bin-hadoop2.6 /usr/local/spark
</code></pre></div>    </div>
  </li>
  <li>Set up environment variables
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> echo "JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64" &gt;&gt; ~/.bashrc
 echo "HADOOP_HOME=/usr/local/hadoop" &gt;&gt; ~/.bashrc
 echo "SPARK_HOME=/usr/local/spark" &gt;&gt; ~/.bashrc
 echo "PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$SPARK_HOME/bin:$SPARK_HOME/sbin" &gt;&gt;~/.bashrc
 source ~/.bashrc
</code></pre></div>    </div>
  </li>
  <li>Set up ssh-keys (OPTIONAL: If you have already done or want to use the same key for all)
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ssh-keygen -t rsa -f ~/.ssh/id_rsa -P ''
 ssh-copy-id user@slave1
 ssh-copy-id user@slave2
 ssh-copy-id user@slave3
 .
 .
 .
 ssh-copy-id user@slaveN
</code></pre></div>    </div>
  </li>
  <li>Setup HDFS directories
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> sudo mkdir -p /mnt/hdfs/namenode
 sudo mkdir -p /mnt/hdfs/datanode
 sudo mkdir $HADOOP_HOME/logs
</code></pre></div>    </div>
  </li>
  <li>Modify Hadoop Configuration Files (<code class="highlighter-rouge">./config/*</code> )</li>
  <li>Modify <strong>core-site.xml</strong> replace <code class="highlighter-rouge">MASTER</code> with hostname of master
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    &lt;value&gt;hdfs://MASTER:9000/&lt;/value&gt;  
</code></pre></div>    </div>
  </li>
  <li>Modify <strong>slaves,</strong> add the names of each slave one per line</li>
  <li>Modify <strong>hadoop-env.sh</strong> to specify the correct java version
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64
</code></pre></div>    </div>
  </li>
  <li>Modify Spark Configuration Files (<code class="highlighter-rouge">./spark_config/*</code> )</li>
  <li>Modify <strong>slaves</strong>, add the names of each slave one per line</li>
  <li>Modify <strong>spark-defaults.conf,</strong> specify the spark master hostname. Replace <code class="highlighter-rouge">MASTER</code> with the url of the master node
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    spark.master                     spark://MASTER:7077
</code></pre></div>    </div>
  </li>
  <li>Make the spark history server directory. This is specified in <strong>spark-defaults.conf</strong> and can be changed as you see fit.
mkdir /history</li>
  <li>Copy the configuration files
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo cp config/ssh_config ~/.ssh/config
sudo cp config/hadoop-env.sh $HADOOP_HOME/etc/hadoop/hadoop-env.sh
sudo cp config/hdfs-site.xml $HADOOP_HOME/etc/hadoop/hdfs-site.xml
sudo cp config/core-site.xml $HADOOP_HOME/etc/hadoop/core-site.xml
sudo cp config/mapred-site.xml $HADOOP_HOME/etc/hadoop/mapred-site.xml
sudo cp config/yarn-site.xml $HADOOP_HOME/etc/hadoop/yarn-site.xml
sudo cp config/slaves $HADOOP_HOME/etc/hadoop/slaves
cp config/start-hadoop.sh ~/start-hadoop.sh
cp config/run-wordcount.sh ~/run-wordcount.sh
cp spark_config/slaves $SPARK_HOME/conf/slaves
cp spark_config/spark-defaults.conf $SPARK_HOME/conf/spark-defaults.conf
</code></pre></div>    </div>
  </li>
  <li>Set permissions. Replace <code class="highlighter-rouge">USER:USER</code> with your username
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod +x ~/start-hadoop.sh
chmod +x ~/run-wordcount.sh
chmod +x $HADOOP_HOME/sbin/*
sudo chmod -R +rwx $HADOOP_HOME
sudo chmod -R +rwx $SPARK_HOME
sudo chown -R USER:USER /mnt/hdfs
sudo chown -R USER:USER /history
sudo chown -R USER:USER $HADOOP_HOME/logs
</code></pre></div>    </div>
  </li>
  <li>Format namenodes
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo /usr/local/hadoop/bin/hdfs namenode -format
</code></pre></div>    </div>
  </li>
  <li>Start HDFS
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>start-dfs.sh
</code></pre></div>    </div>
  </li>
  <li>Start Spark Master
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>start-master.sh
</code></pre></div>    </div>
  </li>
  <li>Start Spark Slaves
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>start-slaves.sh
</code></pre></div>    </div>
  </li>
  <li>FIN</li>
</ol>

<h1 id="misc-notes">Misc notes</h1>

<p>I have officially accepted my internship offer to work at IBM Thomas J. Watson Research Center. 
It looks like I will be working in Yorktown Heights for the summer and I can’t wait to see what exciting 
projects I’ll be working on.</p>

<h1 id="whats--up-for-next-week">What’s  up for next week?</h1>
<ul>
  <li>Discuss with Don and Prashant the experiments to run for mptcp datacenter workloads</li>
  <li>Rack the servers in the server room and attach networking.</li>
  <li>Continue making my way through the modeling text book.</li>
</ul>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

<!--     <h2 class="footer-heading">DC@KTH</h2> -->

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li><strong>DC@KTH</strong></li>

          <li><a href="mailto:"></a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
         <p class="text">
      </div>
    </div>

  </div>

</footer>

  </body>

</html>
